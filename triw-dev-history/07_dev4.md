# 7. 再々起動（8月11日～25日）
## プレイリスト作成機能を追加しよう
- 動いた！やったー！じゃあどんどんいくよ！　という勢いで、機能追加に取り掛かりました。フェーズでいうと、次は既存のプレイリストではなくてオリジナルのプレイリストを作らせるところです。
- 枠組みづくりは結構すんなりできました。
- しかし満足いくリストを作らせるのがとても難しい。
- 
![](images/07_dev4-2025-10-12-21-34-55.png)

- こんな感じで、チルアウトという番組名を指定するとその言葉にひっぱられた曲名しか出てこない。こりゃだめだ。
- 曲を選ぶロジックに問題がある。ChatGPTに作らせたら、キーワード検索とか、ジャンル＝〇〇とかの厳密な指定を基にしてSpotifyで該当曲をひっぱってくるみたいなことをする。ここでLLMをうまく使うのがプレイリストのポイントになりそう。自分もLLMなのにLLMを積極的に使おう！ってならないんだよね。面白いね。
- 面白いけどやっかいで、自然言語で扱いたいのにすぐにデータ化をしたがる。変数に数字を入れたがる（人気数値〇〇以上のもの、とか）。プレイリストは結構感覚のものなので、そこはあまり数値化しないで進めたかった。
- 一応SpotifyのAPIでひっぱってこられるデータも改めて調査。
- ロジック変えたら今度は選曲数がゼロとかになってしまう。 
- うーんこれはやり方変えないとだめかもな。
- Spotify内のデータに頼らずLLMに候補曲を出してもらい、それをSpotifyに問い合わせて実在するものをピックアップする方針に変更。
- まあでもなかなかうまくいかないね！
- うなってたら、途中の選ぶ過程をJSONで出すデバッグ機能を追加してくれた。これは助かる！
  
  
## 再度作り直し
- 修正していくとまた泥沼にはまりそうな予感があったので、作り直すことにした。
- なにしろコードの中身をちゃんと把握していないので、改修に自信が持てないのである。
- ちゃんとした指示さえすれば、整合性の取れたちゃんとしたコードをすぐに出してくれるしへたに改修するよりそれのが品質もいいし早い。
- いままではまったポイントのメモ（作業日報）とか、使えそうなコードをまるっと貼って渡すようにした。
- 作り直して動くまでは早くなったと思う。でもそこから修正積み重ねるとまたぐだぐだになる。


## DJセレクト機能を追加しよう
- 番組名だけだと曲のジャンルなどがバラバラでプレイリストとして成り立たない。
- どうするか考えて、ここに「曲を選ぶ人」を追加することにした。
- 曲の選択はLLMが行っている。なら得意ジャンルなどを指定したペルソナを入れてあげればうまくいくのでは、という目論見です。
- この方針は結構よさげ。

#
- 

