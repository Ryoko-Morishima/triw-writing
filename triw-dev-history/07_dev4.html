<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>7. 沼る予感からの再々起動（8月11日～25日） - Project TRIW 開発記録</title>

  <style>
    body {
      font: 16px/1.7 system-ui, -apple-system, "Segoe UI", Roboto,
            "Hiragino Kaku Gothic ProN", "Noto Sans JP", sans-serif;
      margin: 24px;
      background: #fff;
      color: #222;
    }
    main {
      max-width: 900px;
      margin: 0 auto;
    }
    h1 { font-size: 1.8rem; margin-bottom: 0.5rem; }
    h2 { font-size: 1.3rem; margin-top: 2rem; }
    hr { margin: 1.5rem 0; }
    p { margin: 0 0 1em; }
    ul { padding-left: 1.4rem; margin: 0 0 1em; }
    li { margin-bottom: 0.3em; }

    img {
      max-width: 100%;
      height: auto;
      display: block;
    }

    .img-box {
      border: 1px solid #4a5a78;
      padding: 4px;
      margin: 8px 0 24px;
    }

    nav {
      margin-top: 32px;
      text-align: center;
      font-size: 0.95rem;
    }
    nav a {
      color: #0366d6;
      text-decoration: none;
    }
    nav a:hover {
      text-decoration: underline;
    }
  </style>
</head>
<body>
  <main>

    <h1>7. 沼る予感からの再々起動（8月11日～25日）</h1>

    <h2>プレイリスト作成機能を追加しよう</h2>
    <p>
      動いた！やったー！じゃあどんどんいくよ！　という勢いで、機能追加に取り掛かりました。
      フェーズでいうと、次は既存のプレイリストではなくてオリジナルのプレイリストを作らせるところです。
      枠組みづくりは結構すんなりできました。
      しかし満足いくリストを作らせるのがとても難しい。
    </p>

    <p>こんな感じで、チルアウトという番組名を指定するとその言葉にひっぱられた曲名しか出てこない。</p>
    <div class="img-box"><img src="images/07_dev4-2025-10-12-21-34-55.png" alt=""></div>

    <p>こりゃだめだ。</p>
    <p>
      曲を選ぶロジックに問題があるみたいで、ChatGPTに作らせたら、
      キーワード検索とか、ジャンル＝〇〇とかの厳密な指定を基にしてSpotifyで該当曲をひっぱってくるみたいなことをしてしまうのです。
    </p>

    <p>
      ここでLLMをうまく使うのがプレイリストのポイントになりそう。
      自分もLLMなのにLLMを積極的に使おう！ってならないんだよね。面白いね。
    </p>

    <p>
      面白いけどやっかいで、自然言語で扱いたいのにすぐにデータ化をしたがる。
      変数に数字やキーワードを入れたがる（人気数値〇〇以上のもの、とか）。
      そこの根本的なロジックを変えたがらないので、ちょっと変えたら今度は選曲数がゼロとかになってしまう。
    </p>

    <p>
      うーんこれはやり方変えないとだめだな。というわけで、ここは人間が考えます。
      選曲というのは結構感覚のものなので、そこはあまり数値化しないで進めるように明示的に言ってロジックを変えてもらいました。
      Spotify内のデータに頼らずLLMに候補曲を出してもらい、それをSpotifyに問い合わせて実在するものをピックアップする方針に変更しました。
    </p>

    <p>まあでもなかなかうまくいかないね！</p>

    <p>
      うなってたら、途中の選ぶ過程をJSONで出すデバッグ機能を追加してくれました。
      これは助かる！　過程みながらどうするかプロンプトを考えていくことにします。
    </p>

    <h2>再度作り直し</h2>
    <p>
      そんなかんじで、結構でかい修正になるので、また泥沼にはまりそうな予感があり、作り直すことにしました。
      なにしろコードの中身をちゃんと把握していないので、改修に自信が持てないのです。
      でもちゃんとした指示さえすれば、整合性の取れたちゃんとしたコードをすぐに出してくれるので、
      へたに改修するよりそれのが品質もいいし早いですね。
    </p>

    <p>
      ただ、いままでやった経験も使えるはずなので、それを生かす方法を考えました。
      いままではまったポイントのメモ（作業日報）とか、使えそうなコードなど、
      使えそうなものをまるっと貼って渡すようにしました。
      このへんで、自分がやることは最上流（マネージメント）と最下流（コピペやテスト）という、
      なんかすごい分裂した感じの作業なんだなということがわかってきました。
      作り直して動くまでは早くなったと思います。
      でもそこから修正積み重ねるとまたぐだぐだになるんですけどね……。
    </p>

    <h2>プレイリストの質を高めるための仕組みをひらめく</h2>
    <p>
      つぎの課題はこれ。「番組名だけだと曲のジャンルなどがバラバラでプレイリストとして成り立たない」
      ジャンルだけでもないんですよね。あと毎回ジャンルとかこっちが指定するの嫌じゃないですか。
    </p>

    <p>
      どうしたらいいか考えて、出した結論が「曲を選ぶ人」を追加することです。
    </p>

    <p>
      曲の選択はLLMにプロンプトをわたして行う。
      なら、そこに得意ジャンルなどを指定したペルソナを入れてあげればうまくいくのでは、という目論見です。
      この方針は結構よさげ。
    </p>

    <hr>

    <nav>
      ← <a href="06_dev3.html">前へ（仕切り直しからの一気に作成）</a>　|　
      <a href="08_dev5.html">次へ（開発フェーズ5）</a> →
    </nav>
<div style="text-align:center; margin-top:40px;">
  <a href="../index.html" 
     style="display:inline-block; padding:10px 18px; border:1px solid #4a5a78;
            border-radius:6px; color:#0366d6; text-decoration:none;
            background:#f9fafb; font-size:0.9rem;">
    ▲ トップへ戻る
  </a>
</div>

  </main>
</body>
</html>
