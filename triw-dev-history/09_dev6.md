---
layout: default
title: 選曲ロジックを詰めていったらまた沼にはまる（8月後半～9月後半）
---

# 9. 選曲ロジックを詰めていったらまた沼にはまる（8月後半～9月後半）
## また状況が悪化
  機能を追加して書き換えていくうちに、なぜか見た目がまたしょぼくなったり。行ったり来たり……（8/29）。
![](images/07_dev4-2025-10-12-21-42-23.png)

  さらに選曲ロジックをいろいろいじってたらどんどん状況が悪化してきました。
  しかも開発ドキュメント渡してるのに読んでくれない……。
 マネージャー（私）怒ってる。
  ![](images/08_dev5-2025-10-13-13-00-02.png)

 がんばって修正してくれようとしたんだけど、一向に良くならないので、あきらめてまたやり直すことにしました。8月30日にフォルダごとまるっとバックアップした形跡がある。
 ![](images/09_dev6-2025-10-13-13-17-21.png)
 
 ていうかGitHub何のためにあるのよ、と思われると思います。はい、しばらくちゃんと上げてませんでした！　いい感じで進んでたんで忘れちゃってたの。気づいたらもう手遅れ。

## 仕切り直したよ
 やり直すと早い。ちゃんとメモも残ってるしね。やり直しは慣れてきた！
 使えるコードはどんどん使ってもらうようにしました。
 ここまでこぎつけた（9/2）。
   1. 番組タイトルと概要を入力、DJを選択、曲数か分数を指定
   2. 曲を選択してその選択理由もかかせる。
   3. Spotifyに問い合わせてデータを取ってくる。
  ![](images/08_dev5-2025-10-13-13-01-53.png)

 ここからはテストして、うまくいかない場合の対策を考えるフェーズ。
 過程ログを吐き出させてるのでチェックもしやすいです。
 だいぶ本来の開発っぽくなってきました。
  

## 選曲の質を上げるための仕組みを考えるのは面白い
  実際のコード修正はいろいろたいへんだが、仕組みを考えるのは面白かったです。
  曲を選ぶとはどういうことかを考える。つまりはテーマの解釈であり、その解釈に合致する曲を選ぶことである。
 
  そこでまずペルソナに番組テーマを自分なりに解釈させるようにしました。それでそのテーマに沿って曲を選ぶという2段階にしたわけです。これで短絡的な曲名検索とかにならなくなりました。
  それだけだとうまくいかなかったので、選んだ曲に対して再度チェックを入れる仕組みを追加してみました。最後にこれで明らかにおかしいのをはじくようにするわけです。
年代などはデータによるファクトチェックをします。
ただ、はじく系の対応の仕組みをChatGPTに頼むといっこずつつぶしていく方向になってきりがなくなります。ここはまかせず自分でやり方を考えていったほうが結果的によかったです。

 コードのエラーも出続けてつぶして、というのも継続してやりつつですが、そこまで重篤なことはなくなってきた（ような気がする、けど忘れてる可能性もある）。
 
  
  という感じで、面白いけどキリがないのでここらへんでいったん区切りをつけようと思いました。
  

